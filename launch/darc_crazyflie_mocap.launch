<?xml version="1.0"?>

<launch>
  
    <node pkg="ros_vrpn_client" name="quad" type="ros_vrpn_client" args="_vrpn_server_ip:=155.98.9.183" required="true" />
    <node pkg="joy" type="joy_node" name="Xbox_Controller" args="/dev/input/js0" respawn="true"/>
    
<node pkg = "darc_waypoints"     type="waypoint_generator" name="Waypoints" respawn = "true"/>

    <node pkg = "darc_mocap"         type="mocap"         name="Mocap"         respawn="true" />
    <node pkg = "darc_manual_fly" type="darc_manual_fly_node" name="Control" respawn="true"/>
  
    <!-- Thrust PID Gains -->
    <arg name="tP" default="2.5"/>
    <param name="thrustP" value="$(arg tP)"/>
    
    <arg name="tI" default="0.02"/>
    <param name="thrustI" value="$(arg tI)"/>
    
    <arg name="tD" default="0.6"/>
    <param name="thrustD" value="$(arg tD)"/>
    
    <!-- Roll PID Gains -->
    <arg name="rP" default="1.15"/>
    <param name="rollP" value="$(arg rP)"/>
    
    <arg name="rI" default="0.002"/>
    <param name="rollI" value="$(arg rI)"/>
    
    <arg name="rD" default="0.8"/>
    <param name="rollD" value="$(arg rD)"/>
    
    <!-- Pitch PID Gains -->
    <arg name="pP" default="1.15"/>
    <param name="pitchP" value="$(arg pP)"/>
    
    <arg name="pI" default="0.002"/>
    <param name="pitchI" value="$(arg pI)"/>
    
    <arg name="pD" default="0.8"/>
    <param name="pitchD" value="$(arg pD)"/>
    
    <!-- Yaw PID Gains -->
    <arg name="yP" default="5.0"/>
    <param name="yawP" value="$(arg yP)"/>
    
    <arg name="yI" default="0.0"/>
    <param name="yawI" value="$(arg yI)"/>
    
    <arg name="yD" default="0.0"/>
    <param name="yawD" value="$(arg yD)"/>
    
    <node pkg = "darc_position_hold" type="position_hold" name="Pos_Hold"      respawn = "true"
    output="screen"/>
    
    
    <node pkg = "darc_crazyflie" type="darc_crazyflie_node" name="darc_crazyflie" respawn = "true" />
  <arg name="crazyflieSDK" default="~/crazyflie/crazyflie-clients-python/lib" />
  <!--<arg name="uri" default="radio://0/80/2M" />-->
  <arg name="uri" default="radio://0/42/2M" />
  <arg name="joy_dev" default="/dev/input/js0" />

  <include file="$(find crazyflie)/launch/crazyflie_server.launch">
    <arg name="crazyflieSDK" value="$(arg crazyflieSDK)" />
  </include>

    <!--<param name="crazyflie/pid_rate/yaw_kp" value="200"/>-->
    <include file="$(find crazyflie)/launch/crazyflie_add.launch">
      <arg name="uri" value="$(arg uri)" />
      <!--<arg name="tf_prefix" value="crazyflie1" />-->
    </include>
   
    <!--<node name ="darc_manual_fly" pkg = "darc_manual_fly" type="darc_manual_fly_node" >
    </node> -->
    
    <node pkg="rqt_plot" type="rqt_plot" name="rqt_plot2" args="/battery"/>
        
    

    
    
    
</launch>
    
